{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Tax Report",
  "type": "object",
      "properties": {
        "tax_year": { "type": "integer" },
        "total_gain": { "type": "string", "description": "Decimal string" },    "total_loss": { "type": "string", "description": "Decimal string" },
    "net_gain": { "type": "string", "description": "Decimal string" },
    "matches": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "date": { "type": "string", "format": "date" },
          "ticker": { "type": "string" },
          "quantity": { "type": "string" },
          "proceeds": { "type": "string" },
          "allowable_cost": { "type": "string" },
          "gain_or_loss": { "type": "string" },
          "rule": { "type": "string", "enum": ["SameDay", "BedAndBreakfast", "Section104"] }
        },
        "required": ["date", "ticker", "quantity", "proceeds", "allowable_cost", "gain_or_loss", "rule"]
      }
    },
    "holdings": {
      "type": "array",
      "description": "Remaining holdings at end of period",
      "items": {
        "type": "object",
        "properties": {
          "ticker": { "type": "string" },
          "quantity": { "type": "string" },
          "total_cost": { "type": "string" }
        },
        "required": ["ticker", "quantity", "total_cost"]
      }
    }
  },
  "required": ["tax_year", "total_gain", "total_loss", "net_gain", "matches", "holdings"]
}
